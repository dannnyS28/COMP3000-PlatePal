<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>View Recipe</title>
    <link rel="stylesheet" href="Styles.css">
</head>

<body>
    <header>
        <h1>View Recipe</h1>
    </header>

    <nav>
        <a href="recipeslist.html">Back</a>
    </nav>

    <form id="editRecipeForm">
        
        
        <h1 id="recipeName" name="recipeName"></h1><br>
        
        <div id="PrepTime"></div><br>
        <div id="CookTime"></div><br>
        <div id="Difficulty"></div><br>
        <div id="Calories"></div><br>
        
        <h2 for="recipeIngredients">Ingredients</h2><br>
        <div id="ingredientDetailsContainer"></div>
        
        <h2 for="recipeInstructions">Instructions</h2><br>
        <div id="recipeInstructions"></div><br>
    </form>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const recipeID = new URLSearchParams(window.location.search).get('recipeID');

            fetch(`DatabaseGetRecipe.php?recipeID=${recipeID}`)
                .then(response => response.json())
                .then(data => {
                    document.getElementById('recipeName').innerHTML = data.Recipe_Name;
                    document.getElementById('PrepTime').innerHTML = "Prep Time: " + data.Recipe_Prep_Time + " minutes";
                    document.getElementById('CookTime').innerHTML = "Cook Time: " + data.Recipe_Cook_Time + " minutes";
                    document.getElementById('Difficulty').innerHTML = "Difficulty: " + data.Recipe_Difficulty_Level + "/5";
                    document.getElementById('Calories').innerHTML = "Calories: " + data.Recipe_Calories + " Calories";
                    document.getElementById('recipeInstructions').textContent = data.Recipe_Instructions;

                    const ingredientDetailsContainer = document.getElementById('ingredientDetailsContainer');

                    ingredientDetailsContainer.innerHTML = '';

                    const ingredientDetails = data.Ingredients_Details.split(',');
                    ingredientDetails.forEach(ingredientDetail => {
                        const [id, name, unit, amount, price] = ingredientDetail.trim().split(' ');

                        const formattedAmount = parseInt(amount);

                        const formattedName = name.replace(/_/g, ' ');

                        const ingredientText = document.createElement('p');
                        ingredientText.textContent = `${formattedAmount}${unit} ${formattedName} (Â£${price} approx)`;

                        ingredientDetailsContainer.appendChild(ingredientText);
                    });
                })
                .catch(error => console.error('Error fetching recipe details:', error));
        });

        
    </script>




</body>

</html>