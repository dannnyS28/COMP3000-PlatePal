<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PlatePal</title>
    <link rel="stylesheet" href="Styles.css">
</head>

<body>
    <header>
        <h1>PlatePal</h1>
    </header>
    <h1>Login</h1>
    <input type="text" id="EmailInput" placeholder="Email">
    <input type="password" id="PasswordInput" placeholder="Password">
    <button type="button" id="LoginButton">Login</button>
    <p>Don't Have an account?</p>
    <button id=SignUpButton>Sign Up</button>
    
    <script>
        const LoginButton = document.getElementById("LoginButton");
        const EmailInput = document.getElementById("EmailInput");
        const PasswordInput = document.getElementById("PasswordInput");
        const SignUpButton = document.getElementById("SignUpButton");

        

        LoginButton.addEventListener("click", function () {
            const UserEmail = EmailInput.value;
            const UserPassword = PasswordInput.value;

            if (UserEmail && UserPassword) { 
                Login(UserEmail, UserPassword);
            } else {
                alert("Please input email and password."); 
            }
        });
        
        SignUpButton.addEventListener("click", function () {
            window.location.href = "usersignup.html"; 
            
        });

        function Login(Email, Password) {
            const formData = new FormData();
            formData.append('Email', Email);
            formData.append('Password', Password);

            fetch('DatabaseLogin.php', {
                method: 'POST',
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                console.log(data.message);
                
                if (data.message === 'Login successful') {
                    window.location.href = "dashboard.html";     
                } else {
                    alert("Account Creation Failed");
                }

            })
            .catch(error => {
                console.error('Error Logging In:', error.message);
            });
        }
    </script>
</body>
</html>

